"use strict";

/* global globalRootUrl, globalTranslate, Form, Config, PbxApi, dnsProvidersMeta */
// Constants related to the form and module
var idUrl = 'module-get-ssl'; // API endpoint for SSL module

var idForm = 'module-get-ssl-form'; // Form element ID for SSL module

var className = 'ModuleGetSsl'; // Class name for this module
// Main ModuleGetSsl class definition

var ModuleGetSsl = {
  // Cache commonly used jQuery objects
  $formObj: $('#' + idForm),
  $checkBoxes: $('#' + idForm + ' .ui.checkbox'),
  $disabilityFields: $('#' + idForm + ' .disability'),
  $statusToggle: $('#module-status-toggle'),
  $submitButton: $('#submitbutton'),
  $moduleStatus: $('#status'),
  $challengeType: $('#challengeType'),
  $dnsProvider: $('#dnsProvider'),
  $httpChallengeInfo: $('#http-challenge-info'),
  $dnsSettingsBlock: $('#dns-settings-block'),
  $dnsCredentialsFields: $('#dns-credentials-fields'),
  $dnsCredentialsInput: $('input[name="dnsCredentials"]'),
  // Validation rules for the form
  validateRules: {
    domainName: {
      identifier: 'domainName',
      rules: [{
        type: 'empty',
        prompt: globalTranslate.module_getssl_DomainNameEmpty
      }]
    }
  },

  /**
   * Initialize the module, bind event listeners, and setup the form.
   */
  initialize: function initialize() {
    // Initialize Semantic UI checkboxes
    this.$checkBoxes.checkbox(); // Initialize dropdowns

    this.$challengeType.dropdown({
      onChange: ModuleGetSsl.onChangeChallengeType
    });
    this.$dnsProvider.dropdown({
      fullTextSearch: true,
      onChange: ModuleGetSsl.onChangeDnsProvider
    }); // Check and set module status on load and when the status changes

    this.checkStatusToggle();
    window.addEventListener('ModuleStatusChanged', this.checkStatusToggle); // Initialize form with validation and submit handlers

    this.initializeForm();
    moduleGetSSLStatusLoopWorker.$resultBlock.hide(); // Restore saved state

    var currentChallenge = this.$challengeType.dropdown('get value') || 'http';
    this.onChangeChallengeType(currentChallenge);
    this.restoreSavedCredentials();
  },

  /**
   * Handle challenge type change: show/hide relevant sections.
   * @param {string} value - 'http' or 'dns'
   */
  onChangeChallengeType: function onChangeChallengeType(value) {
    if (value === 'dns') {
      ModuleGetSsl.$httpChallengeInfo.hide();
      ModuleGetSsl.$dnsSettingsBlock.show(); // Trigger provider change to render credential fields

      var currentProvider = ModuleGetSsl.$dnsProvider.dropdown('get value');

      if (currentProvider) {
        ModuleGetSsl.onChangeDnsProvider(currentProvider);
      }
    } else {
      ModuleGetSsl.$httpChallengeInfo.show();
      ModuleGetSsl.$dnsSettingsBlock.hide();
    }
  },

  /**
   * Handle DNS provider change: dynamically render credential fields.
   * @param {string} value - provider ID (e.g. 'dns_cf')
   */
  onChangeDnsProvider: function onChangeDnsProvider(value) {
    var $container = ModuleGetSsl.$dnsCredentialsFields;
    $container.empty();

    if (!value || typeof dnsProvidersMeta === 'undefined') {
      return;
    } // Find provider metadata


    var provider = dnsProvidersMeta.find(function (p) {
      return p.id === value;
    });

    if (!provider || !provider.fields) {
      return;
    } // Decode existing saved credentials for pre-filling


    var savedCreds = {};
    var encodedVal = ModuleGetSsl.$dnsCredentialsInput.val();

    if (encodedVal) {
      try {
        var decoded = atob(encodedVal);
        savedCreds = JSON.parse(decoded);
      } catch (e) {// ignore decode errors
      }
    } // Render fields


    provider.fields.forEach(function (field) {
      var hasSaved = Boolean(savedCreds[field["var"]]);
      var displayValue = hasSaved ? '••••••••' : '';
      var maskedAttr = hasSaved ? 'data-masked="true"' : '';
      var html = "\n\t\t\t\t<div class=\"field\">\n\t\t\t\t\t<label>".concat(field.label, "</label>\n\t\t\t\t\t<input type=\"password\"\n\t\t\t\t\t\t   class=\"dns-cred-input\"\n\t\t\t\t\t\t   data-var=\"").concat(field["var"], "\"\n\t\t\t\t\t\t   ").concat(maskedAttr, "\n\t\t\t\t\t\t   value=\"").concat(ModuleGetSsl.escapeHtml(displayValue), "\"\n\t\t\t\t\t\t   placeholder=\"").concat(field.label, "\">\n\t\t\t\t</div>");
      $container.append(html);
    }); // On focus: clear mask so user can enter new value

    $container.on('focus', '.dns-cred-input[data-masked]', function () {
      $(this).val('').removeAttr('data-masked');
    }); // Clear error highlight when user starts typing

    $container.on('input', '.dns-cred-input', function () {
      $(this).closest('.field').removeClass('error');
    });
  },

  /**
   * Collect DNS credential field values into base64 JSON and write to hidden input.
   * Masked fields (unchanged) are restored from the previously saved credentials.
   */
  collectDnsCredentials: function collectDnsCredentials() {
    var challengeType = ModuleGetSsl.$challengeType.dropdown('get value');

    if (challengeType !== 'dns') {
      return;
    } // Decode currently stored credentials (source of truth for masked fields)


    var savedCreds = {};
    var encodedVal = ModuleGetSsl.$dnsCredentialsInput.val();

    if (encodedVal) {
      try {
        savedCreds = JSON.parse(atob(encodedVal));
      } catch (e) {// ignore
      }
    }

    var creds = {};
    $('.dns-cred-input').each(function () {
      var varName = $(this).data('var');
      if (!varName) return;

      if ($(this).is('[data-masked]')) {
        // User didn't change this field — keep stored value
        if (savedCreds[varName]) {
          creds[varName] = savedCreds[varName];
        }
      } else {
        var val = $(this).val();

        if (val) {
          creds[varName] = val;
        }
      }
    });
    ModuleGetSsl.$dnsCredentialsInput.val(btoa(JSON.stringify(creds)));
  },

  /**
   * Restore saved credentials into the DNS provider fields on page load.
   */
  restoreSavedCredentials: function restoreSavedCredentials() {
    var currentProvider = ModuleGetSsl.$dnsProvider.dropdown('get value');

    if (currentProvider) {
      ModuleGetSsl.onChangeDnsProvider(currentProvider);
    }
  },

  /**
   * Escape HTML special characters for safe insertion into attributes.
   * @param {string} text
   * @returns {string}
   */
  escapeHtml: function escapeHtml(text) {
    var map = {
      '&': '&amp;',
      '<': '&lt;',
      '>': '&gt;',
      '"': '&quot;',
      "'": '&#039;'
    };
    return String(text).replace(/[&<>"']/g, function (m) {
      return map[m];
    });
  },

  /**
   * Request an SSL certificate by calling the server-side API.
   */
  getSsl: function getSsl() {
    $.api({
      url: "".concat(Config.pbxUrl, "/pbxcore/api/modules/").concat(className, "/get-cert"),
      on: 'now',
      method: 'POST',
      beforeXHR: function beforeXHR(xhr) {
        xhr.setRequestHeader('X-Async-Response-Channel-Id', moduleGetSSLStatusLoopWorker.channelId);
        xhr.setRequestHeader('X-Processor-Timeout', '120');
        return xhr;
      },
      beforeSend: function beforeSend(settings) {
        ModuleGetSsl.$submitButton.addClass('loading disabled');
        moduleGetSSLStatusLoopWorker.$resultBlock.show();
        moduleGetSSLStatusLoopWorker.editor.getSession().setValue(globalTranslate.module_getssl_GetSSLProcessing + '\n');
        return settings;
      },
      successTest: PbxApi.successTest,
      onSuccess: function onSuccess(response) {
        ModuleGetSsl.$submitButton.removeClass('loading disabled');
      },
      onFailure: function onFailure(response) {
        ModuleGetSsl.$submitButton.removeClass('loading disabled');
        UserMessage.showMultiString(response.message);
      }
    });
  },

  /**
   * Toggles the form fields and status visibility based on the module's status.
   */
  checkStatusToggle: function checkStatusToggle() {
    if (ModuleGetSsl.$statusToggle.checkbox('is checked')) {
      ModuleGetSsl.$disabilityFields.removeClass('disabled');
      ModuleGetSsl.$moduleStatus.show();
    } else {
      ModuleGetSsl.$disabilityFields.addClass('disabled');
      ModuleGetSsl.$moduleStatus.hide();
    }
  },

  /**
   * Validate DNS provider and credentials when DNS-01 is selected.
   * Returns true if valid, false otherwise.
   */
  validateDnsFields: function validateDnsFields() {
    if (ModuleGetSsl.$challengeType.dropdown('get value') !== 'dns') {
      return true;
    }

    if (!ModuleGetSsl.$dnsProvider.dropdown('get value')) {
      UserMessage.showError(globalTranslate.module_getssl_DnsProviderEmpty);
      return false;
    }

    var hasEmpty = false;
    $('.dns-cred-input').each(function () {
      var $field = $(this).closest('.field');
      var isMasked = $(this).is('[data-masked]');

      if (!isMasked && !$(this).val().trim()) {
        $field.addClass('error');
        hasEmpty = true;
      } else {
        $field.removeClass('error');
      }
    });

    if (hasEmpty) {
      UserMessage.showError(globalTranslate.module_getssl_DnsCredentialsEmpty);
      return false;
    }

    return true;
  },

  /**
   * Callback before sending the form.
   * @param {Object} settings - Ajax request settings.
   * @returns {Object} The modified Ajax request settings.
   */
  cbBeforeSendForm: function cbBeforeSendForm(settings) {
    if (!ModuleGetSsl.validateDnsFields()) {
      return false;
    }

    var result = settings; // Collect DNS credentials into hidden field before form submission

    ModuleGetSsl.collectDnsCredentials();
    result.data = ModuleGetSsl.$formObj.form('get values');
    return result;
  },

  /**
   * Callback function after sending the form.
   */
  cbAfterSendForm: function cbAfterSendForm(response) {
    if (Form.checkSuccess(response)) {
      ModuleGetSsl.getSsl();
    }
  },

  /**
   * Initializes the form validation and submission logic.
   */
  initializeForm: function initializeForm() {
    Form.$formObj = ModuleGetSsl.$formObj;
    Form.url = "".concat(globalRootUrl).concat(idUrl, "/").concat(idUrl, "/save");
    Form.validateRules = ModuleGetSsl.validateRules;
    Form.enableDirrity = false;
    Form.cbAfterSendForm = ModuleGetSsl.cbAfterSendForm;
    Form.cbBeforeSendForm = ModuleGetSsl.cbBeforeSendForm;
    Form.initialize();
  }
}; // Initialize the ModuleGetSsl class when the document is ready

$(document).ready(function () {
  ModuleGetSsl.initialize();
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9tb2R1bGUtZ2V0LXNzbC1pbmRleC5qcyJdLCJuYW1lcyI6WyJpZFVybCIsImlkRm9ybSIsImNsYXNzTmFtZSIsIk1vZHVsZUdldFNzbCIsIiRmb3JtT2JqIiwiJCIsIiRjaGVja0JveGVzIiwiJGRpc2FiaWxpdHlGaWVsZHMiLCIkc3RhdHVzVG9nZ2xlIiwiJHN1Ym1pdEJ1dHRvbiIsIiRtb2R1bGVTdGF0dXMiLCIkY2hhbGxlbmdlVHlwZSIsIiRkbnNQcm92aWRlciIsIiRodHRwQ2hhbGxlbmdlSW5mbyIsIiRkbnNTZXR0aW5nc0Jsb2NrIiwiJGRuc0NyZWRlbnRpYWxzRmllbGRzIiwiJGRuc0NyZWRlbnRpYWxzSW5wdXQiLCJ2YWxpZGF0ZVJ1bGVzIiwiZG9tYWluTmFtZSIsImlkZW50aWZpZXIiLCJydWxlcyIsInR5cGUiLCJwcm9tcHQiLCJnbG9iYWxUcmFuc2xhdGUiLCJtb2R1bGVfZ2V0c3NsX0RvbWFpbk5hbWVFbXB0eSIsImluaXRpYWxpemUiLCJjaGVja2JveCIsImRyb3Bkb3duIiwib25DaGFuZ2UiLCJvbkNoYW5nZUNoYWxsZW5nZVR5cGUiLCJmdWxsVGV4dFNlYXJjaCIsIm9uQ2hhbmdlRG5zUHJvdmlkZXIiLCJjaGVja1N0YXR1c1RvZ2dsZSIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJpbml0aWFsaXplRm9ybSIsIm1vZHVsZUdldFNTTFN0YXR1c0xvb3BXb3JrZXIiLCIkcmVzdWx0QmxvY2siLCJoaWRlIiwiY3VycmVudENoYWxsZW5nZSIsInJlc3RvcmVTYXZlZENyZWRlbnRpYWxzIiwidmFsdWUiLCJzaG93IiwiY3VycmVudFByb3ZpZGVyIiwiJGNvbnRhaW5lciIsImVtcHR5IiwiZG5zUHJvdmlkZXJzTWV0YSIsInByb3ZpZGVyIiwiZmluZCIsInAiLCJpZCIsImZpZWxkcyIsInNhdmVkQ3JlZHMiLCJlbmNvZGVkVmFsIiwidmFsIiwiZGVjb2RlZCIsImF0b2IiLCJKU09OIiwicGFyc2UiLCJlIiwiZm9yRWFjaCIsImZpZWxkIiwiaGFzU2F2ZWQiLCJCb29sZWFuIiwiZGlzcGxheVZhbHVlIiwibWFza2VkQXR0ciIsImh0bWwiLCJsYWJlbCIsImVzY2FwZUh0bWwiLCJhcHBlbmQiLCJvbiIsInJlbW92ZUF0dHIiLCJjbG9zZXN0IiwicmVtb3ZlQ2xhc3MiLCJjb2xsZWN0RG5zQ3JlZGVudGlhbHMiLCJjaGFsbGVuZ2VUeXBlIiwiY3JlZHMiLCJlYWNoIiwidmFyTmFtZSIsImRhdGEiLCJpcyIsImJ0b2EiLCJzdHJpbmdpZnkiLCJ0ZXh0IiwibWFwIiwiU3RyaW5nIiwicmVwbGFjZSIsIm0iLCJnZXRTc2wiLCJhcGkiLCJ1cmwiLCJDb25maWciLCJwYnhVcmwiLCJtZXRob2QiLCJiZWZvcmVYSFIiLCJ4aHIiLCJzZXRSZXF1ZXN0SGVhZGVyIiwiY2hhbm5lbElkIiwiYmVmb3JlU2VuZCIsInNldHRpbmdzIiwiYWRkQ2xhc3MiLCJlZGl0b3IiLCJnZXRTZXNzaW9uIiwic2V0VmFsdWUiLCJtb2R1bGVfZ2V0c3NsX0dldFNTTFByb2Nlc3NpbmciLCJzdWNjZXNzVGVzdCIsIlBieEFwaSIsIm9uU3VjY2VzcyIsInJlc3BvbnNlIiwib25GYWlsdXJlIiwiVXNlck1lc3NhZ2UiLCJzaG93TXVsdGlTdHJpbmciLCJtZXNzYWdlIiwidmFsaWRhdGVEbnNGaWVsZHMiLCJzaG93RXJyb3IiLCJtb2R1bGVfZ2V0c3NsX0Ruc1Byb3ZpZGVyRW1wdHkiLCJoYXNFbXB0eSIsIiRmaWVsZCIsImlzTWFza2VkIiwidHJpbSIsIm1vZHVsZV9nZXRzc2xfRG5zQ3JlZGVudGlhbHNFbXB0eSIsImNiQmVmb3JlU2VuZEZvcm0iLCJyZXN1bHQiLCJmb3JtIiwiY2JBZnRlclNlbmRGb3JtIiwiRm9ybSIsImNoZWNrU3VjY2VzcyIsImdsb2JhbFJvb3RVcmwiLCJlbmFibGVEaXJyaXR5IiwiZG9jdW1lbnQiLCJyZWFkeSJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUVBO0FBQ0EsSUFBTUEsS0FBSyxHQUFPLGdCQUFsQixDLENBQWlEOztBQUNqRCxJ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QUFDNEgsUUFBRCxDQUFELENBQVlDLEtBQVosQ0FBa0IsWUFBTTtBQUN2Qi9ILEVBQUFBLFlBQVksQ0FBQ3NCLFVBQWI7QUFDQSxDQUZEIiwic291cmNlc0NvbnRlbnQiOlsiLyogZ2xvYmFsIGdsb2JhbFJvb3RVcmwsIGdsb2JhbFRyYW5zbGF0ZSwgRm9ybSwgQ29uZmlnLCBQYnhBcGksIGRuc1Byb3ZpZGVyc01ldGEgKi9cblxuLy8gQ29uc3RhbnRzIHJlbGF0ZWQgdG8gdGhlIGZvcm0gYW5kIG1vZHVsZVxuY29uc3QgaWRVcmwgICAgID0gJ21vZHVsZS1nZXQtc3NsJzsgICAgICAgICAgICAgIC8vIEFQSSBlbmRwb2ludCBmb3IgU1NMIG1vZHVsZVxuY29uc3QgaWRGb3JtICAgID0gJ21vZHVsZS1nZXQtc3NsLWZvcm0nOyAgICAgICAgIC8vIEZvcm0gZWxlbWVudCBJRCBmb3IgU1NMIG1vZHVsZVxuY29uc3QgY2xhc3NOYW1lID0gJ01vZHVsZUdldFNzbCc7ICAgICAgICAgICAgICAgIC8vIENsYXNzIG5hbWUgZm9yIHRoaXMgbW9kdWxlXG5cbi8vIE1haW4gTW9kdWxlR2V0U3NsIGNsYXNzIGRlZmluaXRpb25cbmNvbnN0IE1vZHVsZUdldFNzbCA9IHtcblx0Ly8gQ2FjaGUgY29tbW9ubHkgdXNlZCBqUXVlcnkgb2JqZWN0c1xuXHQkZm9ybU9iajogJCgnIycgKyBpZEZvcm0pLFxuXHQkY2hlY2tCb3hlczogJCgnIycgKyBpZEZvcm0gKyAnIC51aS5jaGVja2JveCcpLFxuXHQkZGlzYWJpbGl0eUZpZWxkczogJCgnIycgKyBpZEZvcm0gKyAnIC5kaXNhYmlsaXR5JyksXG5cdCRzdGF0dXNUb2dnbGU6ICQoJyNtb2R1bGUtc3RhdHVzLXRvZ2dsZScpLFxuXHQkc3VibWl0QnV0dG9uOiAkKCcjc3VibWl0YnV0dG9uJyksXG5cdCRtb2R1bGVTdGF0dXM6ICQoJyNzdGF0dXMnKSxcblx0JGNoYWxsZW5nZVR5cGU6ICQoJyNjaGFsbGVuZ2VUeXBlJyksXG5cdCRkbnNQcm92aWRlcjogJCgnI2Ruc1Byb3ZpZGVyJyksXG5cdCRodHRwQ2hhbGxlbmdlSW5mbzogJCgnI2h0dHAtY2hhbGxlbmdlLWluZm8nKSxcblx0JGRuc1NldHRpbmdzQmxvY2s6ICQoJyNkbnMtc2V0dGluZ3MtYmxvY2snKSxcblx0JGRuc0NyZWRlbnRpYWxzRmllbGRzOiAkKCcjZG5zLWNyZWRlbnRpYWxzLWZpZWxkcycpLFxuXHQkZG5zQ3JlZGVudGlhbHNJbnB1dDogJCgnaW5wdXRbbmFtZT1cImRuc0NyZWRlbnRpYWxzXCJdJyksXG5cblx0Ly8gVmFsaWRhdGlvbiBydWxlcyBmb3IgdGhlIGZvcm1cblx0dmFsaWRhdGVSdWxlczoge1xuXHRcdGRvbWFpbk5hbWU6IHtcblx0XHRcdGlkZW50aWZpZXI6ICdkb21haW5OYW1lJyxcblx0XHRcdHJ1bGVzOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAnZW1wdHknLFxuXHRcdFx0XHRcdHByb21wdDogZ2xvYmFsVHJhbnNsYXRlLm1vZHVsZV9nZXRzc2xfRG9tYWluTmFtZUVtcHR5LFxuXHRcdFx0XHR9LFxuXHRcdFx0XSxcblx0XHR9LFxuXHR9LFxuXG5cdC8qKlxuXHQgKiBJbml0aWFsaXplIHRoZSBtb2R1bGUsIGJpbmQgZXZlbnQgbGlzdGVuZXJzLCBhbmQgc2V0dXAgdGhlIGZvcm0uXG5cdCAqL1xuXHRpbml0aWFsaXplKCkge1xuXHRcdC8vIEluaXRpYWxpemUgU2VtYW50aWMgVUkgY2hlY2tib3hlc1xuXHRcdHRoaXMuJGNoZWNrQm94ZXMuY2hlY2tib3goKTtcblxuXHRcdC8vIEluaXRpYWxpemUgZHJvcGRvd25zXG5cdFx0dGhpcy4kY2hhbGxlbmdlVHlwZS5kcm9wZG93bih7XG5cdFx0XHRvbkNoYW5nZTogTW9kdWxlR2V0U3NsLm9uQ2hhbmdlQ2hhbGxlbmdlVHlwZSxcblx0XHR9KTtcblx0XHR0aGlzLiRkbnNQcm92aWRlci5kcm9wZG93bih7XG5cdFx0XHRmdWxsVGV4dFNlYXJjaDogdHJ1ZSxcblx0XHRcdG9uQ2hhbmdlOiBNb2R1bGVHZXRTc2wub25DaGFuZ2VEbnNQcm92aWRlcixcblx0XHR9KTtcblxuXHRcdC8vIENoZWNrIGFuZCBzZXQgbW9kdWxlIHN0YXR1cyBvbiBsb2FkIGFuZCB3aGVuIHRoZSBzdGF0dXMgY2hhbmdlc1xuXHRcdHRoaXMuY2hlY2tTdGF0dXNUb2dnbGUoKTtcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignTW9kdWxlU3RhdHVzQ2hhbmdlZCcsIHRoaXMuY2hlY2tTdGF0dXNUb2dnbGUpO1xuXG5cdFx0Ly8gSW5pdGlhbGl6ZSBmb3JtIHdpdGggdmFsaWRhdGlvbiBhbmQgc3VibWl0IGhhbmRsZXJzXG5cdFx0dGhpcy5pbml0aWFsaXplRm9ybSgpO1xuXG5cdFx0bW9kdWxlR2V0U1NMU3RhdHVzTG9vcFdvcmtlci4kcmVzdWx0QmxvY2suaGlkZSgpO1xuXG5cdFx0Ly8gUmVzdG9yZSBzYXZlZCBzdGF0ZVxuXHRcdGNvbnN0IGN1cnJlbnRDaGFsbGVuZ2UgPSB0aGlzLiRjaGFsbGVuZ2VUeXBlLmRyb3Bkb3duKCdnZXQgdmFsdWUnKSB8fCAnaHR0cCc7XG5cdFx0dGhpcy5vbkNoYW5nZUNoYWxsZW5nZVR5cGUoY3VycmVudENoYWxsZW5nZSk7XG5cdFx0dGhpcy5yZXN0b3JlU2F2ZWRDcmVkZW50aWFscygpO1xuXHR9LFxuXG5cdC8qKlxuXHQgKiBIYW5kbGUgY2hhbGxlbmdlIHR5cGUgY2hhbmdlOiBzaG93L2hpZGUgcmVsZXZhbnQgc2VjdGlvbnMuXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSAtICdodHRwJyBvciAnZG5zJ1xuXHQgKi9cblx0b25DaGFuZ2VDaGFsbGVuZ2VUeXBlKHZhbHVlKSB7XG5cdFx0aWYgKHZhbHVlID09PSAnZG5zJykge1xuXHRcdFx0TW9kdWxlR2V0U3NsLiRodHRwQ2hhbGxlbmdlSW5mby5oaWRlKCk7XG5cdFx0XHRNb2R1bGVHZXRTc2wuJGRuc1NldHRpbmdzQmxvY2suc2hvdygpO1xuXHRcdFx0Ly8gVHJpZ2dlciBwcm92aWRlciBjaGFuZ2UgdG8gcmVuZGVyIGNyZWRlbnRpYWwgZmllbGRzXG5cdFx0XHRjb25zdCBjdXJyZW50UHJvdmlkZXIgPSBNb2R1bGVHZXRTc2wuJGRuc1Byb3ZpZGVyLmRyb3Bkb3duKCdnZXQgdmFsdWUnKTtcblx0XHRcdGlmIChjdXJyZW50UHJvdmlkZXIpIHtcblx0XHRcdFx0TW9kdWxlR2V0U3NsLm9uQ2hhbmdlRG5zUHJvdmlkZXIoY3VycmVudFByb3ZpZGVyKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0TW9kdWxlR2V0U3NsLiRodHRwQ2hhbGxlbmdlSW5mby5zaG93KCk7XG5cdFx0XHRNb2R1bGVHZXRTc2wuJGRuc1NldHRpbmdzQmxvY2suaGlkZSgpO1xuXHRcdH1cblx0fSxcblxuXHQvKipcblx0ICogSGFuZGxlIEROUyBwcm92aWRlciBjaGFuZ2U6IGR5bmFtaWNhbGx5IHJlbmRlciBjcmVkZW50aWFsIGZpZWxkcy5cblx0ICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIC0gcHJvdmlkZXIgSUQgKGUuZy4gJ2Ruc19jZicpXG5cdCAqL1xuXHRvbkNoYW5nZURuc1Byb3ZpZGVyKHZhbHVlKSB7XG5cdFx0Y29uc3QgJGNvbnRhaW5lciA9IE1vZHVsZUdldFNzbC4kZG5zQ3JlZGVudGlhbHNGaWVsZHM7XG5cdFx0JGNvbnRhaW5lci5lbXB0eSgpO1xuXG5cdFx0aWYgKCF2YWx1ZSB8fCB0eXBlb2YgZG5zUHJvdmlkZXJzTWV0YSA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBGaW5kIHByb3ZpZGVyIG1ldGFkYXRhXG5cdFx0Y29uc3QgcHJvdmlkZXIgPSBkbnNQcm92aWRlcnNNZXRhLmZpbmQocCA9PiBwLmlkID09PSB2YWx1ZSk7XG5cdFx0aWYgKCFwcm92aWRlciB8fCAhcHJvdmlkZXIuZmllbGRzKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gRGVjb2RlIGV4aXN0aW5nIHNhdmVkIGNyZWRlbnRpYWxzIGZvciBwcmUtZmlsbGluZ1xuXHRcdGxldCBzYXZlZENyZWRzID0ge307XG5cdFx0Y29uc3QgZW5jb2RlZFZhbCA9IE1vZHVsZUdldFNzbC4kZG5zQ3JlZGVudGlhbHNJbnB1dC52YWwoKTtcblx0XHRpZiAoZW5jb2RlZFZhbCkge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0Y29uc3QgZGVjb2RlZCA9IGF0b2IoZW5jb2RlZFZhbCk7XG5cdFx0XHRcdHNhdmVkQ3JlZHMgPSBKU09OLnBhcnNlKGRlY29kZWQpO1xuXHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHQvLyBpZ25vcmUgZGVjb2RlIGVycm9yc1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFJlbmRlciBmaWVsZHNcblx0XHRwcm92aWRlci5maWVsZHMuZm9yRWFjaChmaWVsZCA9PiB7XG5cdFx0XHRjb25zdCBoYXNTYXZlZCA9IEJvb2xlYW4oc2F2ZWRDcmVkc1tmaWVsZC52YXJdKTtcblx0XHRcdGNvbnN0IGRpc3BsYXlWYWx1ZSA9IGhhc1NhdmVkID8gJ+KAouKAouKAouKAouKAouKAouKAouKAoicgOiAnJztcblx0XHRcdGNvbnN0IG1hc2tlZEF0dHIgPSBoYXNTYXZlZCA/ICdkYXRhLW1hc2tlZD1cInRydWVcIicgOiAnJztcblx0XHRcdGNvbnN0IGh0bWwgPSBgXG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJmaWVsZFwiPlxuXHRcdFx0XHRcdDxsYWJlbD4ke2ZpZWxkLmxhYmVsfTwvbGFiZWw+XG5cdFx0XHRcdFx0PGlucHV0IHR5cGU9XCJwYXNzd29yZFwiXG5cdFx0XHRcdFx0XHQgICBjbGFzcz1cImRucy1jcmVkLWlucHV0XCJcblx0XHRcdFx0XHRcdCAgIGRhdGEtdmFyPVwiJHtmaWVsZC52YXJ9XCJcblx0XHRcdFx0XHRcdCAgICR7bWFza2VkQXR0cn1cblx0XHRcdFx0XHRcdCAgIHZhbHVlPVwiJHtNb2R1bGVHZXRTc2wuZXNjYXBlSHRtbChkaXNwbGF5VmFsdWUpfVwiXG5cdFx0XHRcdFx0XHQgICBwbGFjZWhvbGRlcj1cIiR7ZmllbGQubGFiZWx9XCI+XG5cdFx0XHRcdDwvZGl2PmA7XG5cdFx0XHQkY29udGFpbmVyLmFwcGVuZChodG1sKTtcblx0XHR9KTtcblx0XHQvLyBPbiBmb2N1czogY2xlYXIgbWFzayBzbyB1c2VyIGNhbiBlbnRlciBuZXcgdmFsdWVcblx0XHQkY29udGFpbmVyLm9uKCdmb2N1cycsICcuZG5zLWNyZWQtaW5wdXRbZGF0YS1tYXNrZWRdJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0JCh0aGlzKS52YWwoJycpLnJlbW92ZUF0dHIoJ2RhdGEtbWFza2VkJyk7XG5cdFx0fSk7XG5cdFx0Ly8gQ2xlYXIgZXJyb3IgaGlnaGxpZ2h0IHdoZW4gdXNlciBzdGFydHMgdHlwaW5nXG5cdFx0JGNvbnRhaW5lci5vbignaW5wdXQnLCAnLmRucy1jcmVkLWlucHV0JywgZnVuY3Rpb24gKCkge1xuXHRcdFx0JCh0aGlzKS5jbG9zZXN0KCcuZmllbGQnKS5yZW1vdmVDbGFzcygnZXJyb3InKTtcblx0XHR9KTtcblx0fSxcblxuXHQvKipcblx0ICogQ29sbGVjdCBETlMgY3JlZGVudGlhbCBmaWVsZCB2YWx1ZXMgaW50byBiYXNlNjQgSlNPTiBhbmQgd3JpdGUgdG8gaGlkZGVuIGlucHV0LlxuXHQgKiBNYXNrZWQgZmllbGRzICh1bmNoYW5nZWQpIGFyZSByZXN0b3JlZCBmcm9tIHRoZSBwcmV2aW91c2x5IHNhdmVkIGNyZWRlbnRpYWxzLlxuXHQgKi9cblx0Y29sbGVjdERuc0NyZWRlbnRpYWxzKCkge1xuXHRcdGNvbnN0IGNoYWxsZW5nZVR5cGUgPSBNb2R1bGVHZXRTc2wuJGNoYWxsZW5nZVR5cGUuZHJvcGRvd24oJ2dldCB2YWx1ZScpO1xuXHRcdGlmIChjaGFsbGVuZ2VUeXBlICE9PSAnZG5zJykge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHQvLyBEZWNvZGUgY3VycmVudGx5IHN0b3JlZCBjcmVkZW50aWFscyAoc291cmNlIG9mIHRydXRoIGZvciBtYXNrZWQgZmllbGRzKVxuXHRcdGxldCBzYXZlZENyZWRzID0ge307XG5cdFx0Y29uc3QgZW5jb2RlZFZhbCA9IE1vZHVsZUdldFNzbC4kZG5zQ3JlZGVudGlhbHNJbnB1dC52YWwoKTtcblx0XHRpZiAoZW5jb2RlZFZhbCkge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0c2F2ZWRDcmVkcyA9IEpTT04ucGFyc2UoYXRvYihlbmNvZGVkVmFsKSk7XG5cdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdC8vIGlnbm9yZVxuXHRcdFx0fVxuXHRcdH1cblx0XHRjb25zdCBjcmVkcyA9IHt9O1xuXHRcdCQoJy5kbnMtY3JlZC1pbnB1dCcpLmVhY2goZnVuY3Rpb24gKCkge1xuXHRcdFx0Y29uc3QgdmFyTmFtZSA9ICQodGhpcykuZGF0YSgndmFyJyk7XG5cdFx0XHRpZiAoIXZhck5hbWUpIHJldHVybjtcblx0XHRcdGlmICgkKHRoaXMpLmlzKCdbZGF0YS1tYXNrZWRdJykpIHtcblx0XHRcdFx0Ly8gVXNlciBkaWRuJ3QgY2hhbmdlIHRoaXMgZmllbGQg4oCUIGtlZXAgc3RvcmVkIHZhbHVlXG5cdFx0XHRcdGlmIChzYXZlZENyZWRzW3Zhck5hbWVdKSB7XG5cdFx0XHRcdFx0Y3JlZHNbdmFyTmFtZV0gPSBzYXZlZENyZWRzW3Zhck5hbWVdO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb25zdCB2YWwgPSAkKHRoaXMpLnZhbCgpO1xuXHRcdFx0XHRpZiAodmFsKSB7XG5cdFx0XHRcdFx0Y3JlZHNbdmFyTmFtZV0gPSB2YWw7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0XHRNb2R1bGVHZXRTc2wuJGRuc0NyZWRlbnRpYWxzSW5wdXQudmFsKGJ0b2EoSlNPTi5zdHJpbmdpZnkoY3JlZHMpKSk7XG5cdH0sXG5cblx0LyoqXG5cdCAqIFJlc3RvcmUgc2F2ZWQgY3JlZGVudGlhbHMgaW50byB0aGUgRE5TIHByb3ZpZGVyIGZpZWxkcyBvbiBwYWdlIGxvYWQuXG5cdCAqL1xuXHRyZXN0b3JlU2F2ZWRDcmVkZW50aWFscygpIHtcblx0XHRjb25zdCBjdXJyZW50UHJvdmlkZXIgPSBNb2R1bGVHZXRTc2wuJGRuc1Byb3ZpZGVyLmRyb3Bkb3duKCdnZXQgdmFsdWUnKTtcblx0XHRpZiAoY3VycmVudFByb3ZpZGVyKSB7XG5cdFx0XHRNb2R1bGVHZXRTc2wub25DaGFuZ2VEbnNQcm92aWRlcihjdXJyZW50UHJvdmlkZXIpO1xuXHRcdH1cblx0fSxcblxuXHQvKipcblx0ICogRXNjYXBlIEhUTUwgc3BlY2lhbCBjaGFyYWN0ZXJzIGZvciBzYWZlIGluc2VydGlvbiBpbnRvIGF0dHJpYnV0ZXMuXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0XG5cdCAqIEByZXR1cm5zIHtzdHJpbmd9XG5cdCAqL1xuXHRlc2NhcGVIdG1sKHRleHQpIHtcblx0XHRjb25zdCBtYXAgPSB7ICcmJzogJyZhbXA7JywgJzwnOiAnJmx0OycsICc+JzogJyZndDsnLCAnXCInOiAnJnF1b3Q7JywgXCInXCI6ICcmIzAzOTsnIH07XG5cdFx0cmV0dXJuIFN0cmluZyh0ZXh0KS5yZXBsYWNlKC9bJjw+XCInXS9nLCBtID0+IG1hcFttXSk7XG5cdH0sXG5cblx0LyoqXG5cdCAqIFJlcXVlc3QgYW4gU1NMIGNlcnRpZmljYXRlIGJ5IGNhbGxpbmcgdGhlIHNlcnZlci1zaWRlIEFQSS5cblx0ICovXG5cdGdldFNzbCgpIHtcblx0XHQkLmFwaSh7XG5cdFx0XHR1cmw6IGAke0NvbmZpZy5wYnhVcmx9L3BieGNvcmUvYXBpL21vZHVsZXMvJHtjbGFzc05hbWV9L2dldC1jZXJ0YCxcblx0XHRcdG9uOiAnbm93Jyxcblx0XHRcdG1ldGhvZDogJ1BPU1QnLFxuXHRcdFx0YmVmb3JlWEhSKHhocikge1xuXHRcdFx0XHR4aHIuc2V0UmVxdWVzdEhlYWRlciAoJ1gtQXN5bmMtUmVzcG9uc2UtQ2hhbm5lbC1JZCcsIG1vZHVsZUdldFNTTFN0YXR1c0xvb3BXb3JrZXIuY2hhbm5lbElkKTtcblx0XHRcdFx0eGhyLnNldFJlcXVlc3RIZWFkZXIgKCdYLVByb2Nlc3Nvci1UaW1lb3V0JywgJzEyMCcpO1xuXHRcdFx0XHRyZXR1cm4geGhyO1xuXHRcdFx0fSxcblx0XHRcdGJlZm9yZVNlbmQoc2V0dGluZ3MpIHtcblx0XHRcdFx0TW9kdWxlR2V0U3NsLiRzdWJtaXRCdXR0b24uYWRkQ2xhc3MoJ2xvYWRpbmcgZGlzYWJsZWQnKTtcblx0XHRcdFx0bW9kdWxlR2V0U1NMU3RhdHVzTG9vcFdvcmtlci4kcmVzdWx0QmxvY2suc2hvdygpO1xuXHRcdFx0XHRtb2R1bGVHZXRTU0xTdGF0dXNMb29wV29ya2VyLmVkaXRvci5nZXRTZXNzaW9uKCkuc2V0VmFsdWUoXG5cdFx0XHRcdGdsb2JhbFRyYW5zbGF0ZS5tb2R1bGVfZ2V0c3NsX0dldFNTTFByb2Nlc3NpbmcgKyAnXFxuJ1xuXHRcdFx0KTtcblx0XHRcdFx0cmV0dXJuIHNldHRpbmdzO1xuXHRcdFx0fSxcblx0XHRcdHN1Y2Nlc3NUZXN0OiBQYnhBcGkuc3VjY2Vzc1Rlc3QsXG5cdFx0XHRvblN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXHRcdFx0XHRNb2R1bGVHZXRTc2wuJHN1Ym1pdEJ1dHRvbi5yZW1vdmVDbGFzcygnbG9hZGluZyBkaXNhYmxlZCcpO1xuXHRcdFx0fSxcblx0XHRcdG9uRmFpbHVyZTogZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHRcdFx0TW9kdWxlR2V0U3NsLiRzdWJtaXRCdXR0b24ucmVtb3ZlQ2xhc3MoJ2xvYWRpbmcgZGlzYWJsZWQnKTtcblx0XHRcdFx0VXNlck1lc3NhZ2Uuc2hvd011bHRpU3RyaW5nKHJlc3BvbnNlLm1lc3NhZ2UpO1xuXHRcdFx0fSxcblx0XHR9KVxuXHR9LFxuXG5cdC8qKlxuXHQgKiBUb2dnbGVzIHRoZSBmb3JtIGZpZWxkcyBhbmQgc3RhdHVzIHZpc2liaWxpdHkgYmFzZWQgb24gdGhlIG1vZHVsZSdzIHN0YXR1cy5cblx0ICovXG5cdGNoZWNrU3RhdHVzVG9nZ2xlKCkge1xuXHRcdGlmIChNb2R1bGVHZXRTc2wuJHN0YXR1c1RvZ2dsZS5jaGVja2JveCgnaXMgY2hlY2tlZCcpKSB7XG5cdFx0XHRNb2R1bGVHZXRTc2wuJGRpc2FiaWxpdHlGaWVsZHMucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XG5cdFx0XHRNb2R1bGVHZXRTc2wuJG1vZHVsZVN0YXR1cy5zaG93KCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdE1vZHVsZUdldFNzbC4kZGlzYWJpbGl0eUZpZWxkcy5hZGRDbGFzcygnZGlzYWJsZWQnKTtcblx0XHRcdE1vZHVsZUdldFNzbC4kbW9kdWxlU3RhdHVzLmhpZGUoKTtcblx0XHR9XG5cdH0sXG5cblx0LyoqXG5cdCAqIFZhbGlkYXRlIEROUyBwcm92aWRlciBhbmQgY3JlZGVudGlhbHMgd2hlbiBETlMtMDEgaXMgc2VsZWN0ZWQuXG5cdCAqIFJldHVybnMgdHJ1ZSBpZiB2YWxpZCwgZmFsc2Ugb3RoZXJ3aXNlLlxuXHQgKi9cblx0dmFsaWRhdGVEbnNGaWVsZHMoKSB7XG5cdFx0aWYgKE1vZHVsZUdldFNzbC4kY2hhbGxlbmdlVHlwZS5kcm9wZG93bignZ2V0IHZhbHVlJykgIT09ICdkbnMnKSB7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0aWYgKCFNb2R1bGVHZXRTc2wuJGRuc1Byb3ZpZGVyLmRyb3Bkb3duKCdnZXQgdmFsdWUnKSkge1xuXHRcdFx0VXNlck1lc3NhZ2Uuc2hvd0Vycm9yKGdsb2JhbFRyYW5zbGF0ZS5tb2R1bGVfZ2V0c3NsX0Ruc1Byb3ZpZGVyRW1wdHkpO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHRsZXQgaGFzRW1wdHkgPSBmYWxzZTtcblx0XHQkKCcuZG5zLWNyZWQtaW5wdXQnKS5lYWNoKGZ1bmN0aW9uICgpIHtcblx0XHRcdGNvbnN0ICRmaWVsZCA9ICQodGhpcykuY2xvc2VzdCgnLmZpZWxkJyk7XG5cdFx0XHRjb25zdCBpc01hc2tlZCA9ICQodGhpcykuaXMoJ1tkYXRhLW1hc2tlZF0nKTtcblx0XHRcdGlmICghaXNNYXNrZWQgJiYgISQodGhpcykudmFsKCkudHJpbSgpKSB7XG5cdFx0XHRcdCRmaWVsZC5hZGRDbGFzcygnZXJyb3InKTtcblx0XHRcdFx0aGFzRW1wdHkgPSB0cnVlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0JGZpZWxkLnJlbW92ZUNsYXNzKCdlcnJvcicpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdGlmIChoYXNFbXB0eSkge1xuXHRcdFx0VXNlck1lc3NhZ2Uuc2hvd0Vycm9yKGdsb2JhbFRyYW5zbGF0ZS5tb2R1bGVfZ2V0c3NsX0Ruc0NyZWRlbnRpYWxzRW1wdHkpO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHRyZXR1cm4gdHJ1ZTtcblx0fSxcblxuXHQvKipcblx0ICogQ2FsbGJhY2sgYmVmb3JlIHNlbmRpbmcgdGhlIGZvcm0uXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBzZXR0aW5ncyAtIEFqYXggcmVxdWVzdCBzZXR0aW5ncy5cblx0ICogQHJldHVybnMge09iamVjdH0gVGhlIG1vZGlmaWVkIEFqYXggcmVxdWVzdCBzZXR0aW5ncy5cblx0ICovXG5cdGNiQmVmb3JlU2VuZEZvcm0oc2V0dGluZ3MpIHtcblx0XHRpZiAoIU1vZHVsZUdldFNzbC52YWxpZGF0ZURuc0ZpZWxkcygpKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcdGNvbnN0IHJlc3VsdCA9IHNldHRpbmdzO1xuXHRcdC8vIENvbGxlY3QgRE5TIGNyZWRlbnRpYWxzIGludG8gaGlkZGVuIGZpZWxkIGJlZm9yZSBmb3JtIHN1Ym1pc3Npb25cblx0XHRNb2R1bGVHZXRTc2wuY29sbGVjdERuc0NyZWRlbnRpYWxzKCk7XG5cdFx0cmVzdWx0LmRhdGEgPSBNb2R1bGVHZXRTc2wuJGZvcm1PYmouZm9ybSgnZ2V0IHZhbHVlcycpO1xuXHRcdHJldHVybiByZXN1bHQ7XG5cdH0sXG5cblx0LyoqXG5cdCAqIENhbGxiYWNrIGZ1bmN0aW9uIGFmdGVyIHNlbmRpbmcgdGhlIGZvcm0uXG5cdCAqL1xuXHRjYkFmdGVyU2VuZEZvcm0ocmVzcG9uc2UpIHtcblx0XHRpZiAoRm9ybS5jaGVja1N1Y2Nlc3MocmVzcG9uc2UpKXtcblx0XHRcdE1vZHVsZUdldFNzbC5nZXRTc2woKTtcblx0XHR9XG5cdH0sXG5cblxuXHQvKipcblx0ICogSW5pdGlhbGl6ZXMgdGhlIGZvcm0gdmFsaWRhdGlvbiBhbmQgc3VibWlzc2lvbiBsb2dpYy5cblx0ICovXG5cdGluaXRpYWxpemVGb3JtKCkge1xuXHRcdEZvcm0uJGZvcm1PYmogPSBNb2R1bGVHZXRTc2wuJGZvcm1PYmo7XG5cdFx0Rm9ybS51cmwgPSBgJHtnbG9iYWxSb290VXJsfSR7aWRVcmx9LyR7aWRVcmx9L3NhdmVgO1xuXHRcdEZvcm0udmFsaWRhdGVSdWxlcyA9IE1vZHVsZUdldFNzbC52YWxpZGF0ZVJ1bGVzO1xuXHRcdEZvcm0uZW5hYmxlRGlycml0eSA9IGZhbHNlO1xuXHRcdEZvcm0uY2JBZnRlclNlbmRGb3JtID0gTW9kdWxlR2V0U3NsLmNiQWZ0ZXJTZW5kRm9ybTtcblx0XHRGb3JtLmNiQmVmb3JlU2VuZEZvcm0gPSBNb2R1bGVHZXRTc2wuY2JCZWZvcmVTZW5kRm9ybTtcblx0XHRGb3JtLmluaXRpYWxpemUoKTtcblx0fSxcbn07XG5cbi8vIEluaXRpYWxpemUgdGhlIE1vZHVsZUdldFNzbCBjbGFzcyB3aGVuIHRoZSBkb2N1bWVudCBpcyByZWFkeVxuJChkb2N1bWVudCkucmVhZHkoKCkgPT4ge1xuXHRNb2R1bGVHZXRTc2wuaW5pdGlhbGl6ZSgpO1xufSk7XG4iXX0=